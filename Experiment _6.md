# **EXPERIMENT 6: DESIGN AND ANALYSIS OF CURRENT MIRROR CIRCUIT:**

### **AIM:**
 Design and Analyze Current mirror circuit as active load in amplifier circuit. V<sub>DD</sub>(Power Supply)= 1.8V, P<= 1mW and Gain: A<sub>v</sub> > -10V/V. Perform DC Analysis, Transient analysis and AC analysis. 

 
# **CURRENT MIRROR CIRCUIT:**
### **INTRODUCTION:**
Current Mirror circuit is designed to copy a current to an active device by controlling the current through another active device with the same current characteristics. The current mirror is used to provide bias currents and active loads to circuits. Theoretically a perfect current mirror is an inverting current amplifier. This circuit generates a single copy or number of copies of the reference current. They are used in Integrated circuits to bias the amplifiers. 
**In order to avoid supply and temperature dependence, a bandgap reference can provide a “golden current” while requiring a few tens of devices. We must therefore seek a 
method of “copying” the golden current without duplicating the entire bandgap circuitry. Current mirrors serve this purpose.**

![image](https://github.com/user-attachments/assets/14731da9-b27a-49c9-93a2-eabf47cf7568)

**In the above figure, the golden current generated by a bandgap reference is “read” by the current mirror and a copy having the same characteristics as those of IREF is produced. For example, Icopy = IREF or 2IREF.**

There are Two types of current mirror circuit:


<img src="https://github.com/user-attachments/assets/3f647c1d-03b4-40cc-8173-3984c557b99e" width ="270.71" height="100">


**In this experiment, our main focus is on MOS Current Mirror Circuits and including it as a load in the differential amplifier circuit.**




![image](https://github.com/user-attachments/assets/62f0bef3-c206-49a7-8fda-3e75dd0739f3)

 
### **MOS CURRENT MIRROR CIRCUIT:**
![image](https://github.com/user-attachments/assets/5330cd5a-5a12-4ed8-a098-dd23db6fa05e) 

 (a) Conceptual illustration of copying a current by an NMOS device, (b) generation of 
 a voltage proportional to square root of current, (c) MOS current mirror.


#### **ADVANTAGES OF MOS CURRENT MIRROR CIRCUIT:**
1. Accurate replication of currents.
2. Flexibility to integrate with other configurations like cascade or differential amplifiers.
3. Compatibility with analog integrated circuits.

#### **APPLICATIONS OF MOS CURRENT MIRROR CIRCUIT:**
1. biasing amplifiers,
2. creating current sources, and
3. implementing active loads.

#### **LIMITATIONS OF CURRENT MIRROR CIRCUIT:**
1. **Voltage Drop:** A minimum voltage drop is required across the transistors to operate effectively.
2. **Mismatch Sensitivity:** Variations in transistor characteristics can impact accuracy.
3. **Thermal Dependency:** Performance can degrade with temperature changes.

# **PART A - CURRENT MIRROR CIRCUIT:**
### **COMPONENTS REQUIRED:**
1. MOSFET(NMOS-1, PMOS-2)
2. Power supply-2(1.8V,0.8V)
3. Current source - 0.27775mA


### **CIRCUIT DIAGRAM:**

Circuit diagram is as follows:

![image](https://github.com/user-attachments/assets/70a49487-27f9-4dd5-80e5-5a50f98270fe)

In LTSPICE, the below circuit is drawn:
Assume V<sub>in</sub>

<img src="https://github.com/user-attachments/assets/f30e37cd-2eb3-4421-a870-9b422dae2296" width="904.8" height="600">


### **CIRCUIT ANALYSIS:**
1. DC ANALYSIS:

<img src="https://github.com/user-attachments/assets/233ee38d-5dbd-42c1-ac6f-cbd043eb04c8" width="562.12" height="400">

2. TRANSIENT ANALYSIS:

<img src="https://github.com/user-attachments/assets/4ac05522-a744-409f-a791-3bd6c79db2f8" width="562.12" height="400">

3. AC ANALYSIS"

<img src="https://github.com/user-attachments/assets/e9b7cdaa-ccf5-4df4-908f-76f738f2e7c4" width="562.12" height="400">





### **OBSERVATION TABLE:**
1. For **L=180nm,V<sub>in</sub>=0.8V and V<sub>DD</sub>** we notice how the I<sub>copy</sub>, V<sub>out</sub> and other parameters vary with change in W value of the Mosfets.

|     W      |     V<sub>out</sub>(V)     |     I<sub>ref</sub>(A)     |     I<sub>copy</sub>(practical)(A)     |  
|------------|----------------------------|----------------------------|--------------------------------------- |
|    180n    |          1.34246           |         0.00027775         |              3.77236e-05	              | 
|    200n    |          1.44955           |         0.00027775         |              3.94881e-05               |
|    400n    |          1.57716           |         0.00027775         |              5.48622e-05               |
|    500n    |          1.58156           |         0.00027775         |              6.29122e-05               |
|    750n    |          1.57309           |         0.00027775         |              8.33697e-05               |
|    1u      |          1.55483           |         0.00027775         |              0.000103926               |
|    2u      |          0.442607          |         0.00027775         |              0.000184707               |
|    3u      |          0.629237          |         0.00027775         |              0.000254123               |
|    4u      |          0.427602          |         0.00027775         |              0.000286816               |
|    3.5u    |          0.755505          |         0.00027775         |              0.000275351               |
|    3.7u    |          0.609254          |         0.00027775         |              0.000280976               |
|    3.6u    |          0.680965          |         0.00027775         |              0.000278352               |
|    3.55u   |          0.717998          |         0.00027775         |               0.0002769                |
|    3.57u   |          0.703115          |         0.00027775         |              0.000277492               |
|    3.58u   |          0.695706          |         0.00027775         |              0.000277783               |
|    3.575u  |          0.699407          |         0.00027775         |              0.000277638               |
|**3.57885u**|        **0.696557**        |       **0.00027775**       |            **0.00027775**              |


2. For **L=500nm,V<sub>in</sub>=0.8V and V<sub>DD</sub>** we notice how the I<sub>copy</sub>, V<sub>out</sub> and other parameters vary with change in W value of the Mosfets.

|     W      |     V<sub>out</sub>(V)     |     I<sub>ref</sub>(A)     |     I<sub>copy</sub>(practical)(A)     |
|------------|----------------------------|----------------------------|--------------------------------------- |
|   500n     |          1.68709           |         0.00027775         |              1.84581e-05               |
|   750n     |          1.67129           |         0.00027775         |              2.63514e-05               |
|    1u      |          1.65765           |         0.00027775         |              3.42581e-05               |
|    2u      |          1.61274           |         0.00027775         |              6.58938e-05               |
|    5u      |          1.48979           |         0.00027775         |              0.000160386               |
|   10u      |          0.292066          |         0.00027775         |              0.00028236                |
|    7u      |          1.37569           |         0.00027775         |              0.000222574               |
|    9u      |          0.000222574       |         0.00027775         |              0.000275766               |
|   9.5u     |          0.414358          |         0.00027775         |              0.000280596               |
|   9.3u     |          0.511975          |         0.00027775         |              0.000279198               |
|**9.1543u** |        **0.606889**        |       **0.00027775**       |            **0.00027775**              |

3. For **L=1um,V<sub>in</sub>=0.8V and V<sub>DD</sub>** we notice how the I<sub>copy</sub>, V<sub>out</sub> and other parameters vary with change in W value of the Mosfets.

|     W      |     V<sub>out</sub>(V)     |     I<sub>ref</sub>(A)     |     I<sub>copy</sub>(practical)(A)     |
|------------|----------------------------|----------------------------|--------------------------------------- |
|     1u     |          1.67428           |         0.00027775         |              1.86674e-05               |
|     2u     |          1.63787           |         0.00027775         |              3.6609e-05                |
|    10u     |          1.43563           |         0.00027775         |              0.000179579               |
|    15u     |          1.14076           |         0.00027775         |              0.000266531               |
|    20u     |          0.192214          |         0.00027775         |              0.000281518               |
|    17u     |          0.306692          |         0.00027775         |              0.000279946               |
|**16.0852u**|        **0.542857**        |       **0.00027775**       |             **0.00027775**             |


 
### **INFERENCE:**
1. We notice that in order to set the current value, we change the W value. We notice that theI<sub>copy</sub> value is directly proportional to the W value.


### **PROCEDURE:**
1. Circuit Setup: Construct the circuit as per the provided schematic using LTspice.
2. Power Supply: Set the supply voltage Vdd = 1.8V.
3. Library File Setup:
   1. Download the library file named tsmc018 (1).txt.
   2. Create a new folder and save both the library file and your LTspice project file in it.
   3. Import the library file into LTspice using the .lib or .include SPICE directive.
4. MOSFET Configuration:
   1. Use model names CMOSN for NMOSFETs and CMOSP for PMOSFETs, as specified in the library file.
   2. Set the channel length (L) = 180nm.
   3. Set the NMOS gate voltage = 0.5V.
   4. Vary the NMOS width (W) to achieve the desired Q-point that corresponds to the required current based on the given power rating.
5.DC Analysis:
   1. In the simulation settings, choose DC sweep mode.
   2. This allows you to observe how the current varies with different values of width (W). Since the drain current (Id) is directly proportional to the width, adjust W to match the calculated current.
   3. As this is a current mirror setup, ensure both MOSFETs carry the same current (reference current) and the output mirrors it accurately.
6. Transient Analysis:
   1. In the simulation settings, switch to Transient Analysis.
   2. Set the DC offset = 0.5V, Amplitude = 1mV, and Frequency = 1kHz.
   3. Set the Stop Time = 3ms and run the simulation.
   4. Analyze the waveform and determine the maximum output swing.
7. AC Analysis:
   1. Change the simulation mode to AC Analysis.
   2. Use a decade sweep with 20 points per decade.
   3. Set the frequency range from 0.1 Hz to 1 THz.
   4. From the resulting AC response, determine the 3dB gain and bandwidth of the circuit.

## **1:1 RATIO**
### **CIRCUIT 1: L=180nm**
### **CIRCUIT DIAGRAM:**

<img src="https://github.com/user-attachments/assets/16424d0b-4d5d-4784-8c2b-a29376c23549" width="607.56" height = "400">

 #### **DC ANALYSIS:**
**W = 3.57885u** for I<sub>copy</sub>=I<sub>ref</sub>

<img src="https://github.com/user-attachments/assets/f611aa32-3610-4552-b0c4-a724645bcf21" width="400" height = "400">

#### **TRANSIENT ANALYSIS:**

![image](https://github.com/user-attachments/assets/169efdd6-7b55-46c1-ab62-88dbe119c84c)

 #### **AC ANALYSIS:**
 ![Screenshot 2025-03-30 101351](https://github.com/user-attachments/assets/874050b9-f56d-45d2-b9ab-6b85b096bfd0)

![image](https://github.com/user-attachments/assets/c2236c80-77ff-486f-beb6-6c7b1669d5f5)

![image](https://github.com/user-attachments/assets/6d126716-1d05-4757-aaba-18bb4f4242bc)

### **CIRCUIT 1: L=500nm**
 #### **DC ANALYSIS:**
 ![Screenshot 2025-03-30 225843](https://github.com/user-attachments/assets/ed8cf634-9603-4ce8-88d9-33b2a374f710)

## **1:2 RATIO**
### **CIRCUIT 1: L=180nm**
### **CIRCUIT DIAGRAM:**

![image](https://github.com/user-attachments/assets/c2b3e3bd-9e88-4689-8275-52b4e0793d59)

 #### **DC ANALYSIS:**
 ![image](https://github.com/user-attachments/assets/a9a4f119-8ded-4883-9961-135b6ec0b280)

#### **TRANSIENT ANALYSIS:**
![image](https://github.com/user-attachments/assets/88bb72fb-8b09-41d9-b6cc-65775208d73d)


 #### **AC ANALYSIS:**
 ![Screenshot 2025-03-30 213211](https://github.com/user-attachments/assets/8181f90d-ca92-4488-aa69-8b29e39a81b7)

## **1:3 RATIO**
### **CIRCUIT 1: L=180nm**
#### **DC ANALYSIS:**
![Screenshot 2025-03-30 214001](https://github.com/user-attachments/assets/8ff5ec67-fe70-43ac-8cd7-c2328bbfffe2)

#### **TRANSIENT ANALYSIS:**
![image](https://github.com/user-attachments/assets/6d8a806a-fc18-4be9-91f0-301e0c7e2792)

![image](https://github.com/user-attachments/assets/5ec2e34d-006d-49fb-ad01-8ae17d6c9a9c)

![image](https://github.com/user-attachments/assets/72fbac04-593b-4aa1-9789-dac848447eca)
